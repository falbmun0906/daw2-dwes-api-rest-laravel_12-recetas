{"openapi":"3.0.0","info":{"title":"API REST de Recetas","description":"API completa para gesti\u00f3n de recetas con ingredientes, likes y comentarios","version":"1.0.0","contact":{"name":"Soporte API","email":"api@recetas.local"},"license":{"name":"MIT"}},"servers":[{"url":"http:\/\/localhost","description":"Servidor actual"}],"tags":[{"name":"Autenticaci\u00f3n","description":"Endpoints de autenticaci\u00f3n"},{"name":"Recetas","description":"Gesti\u00f3n de recetas"},{"name":"Ingredientes","description":"Gesti\u00f3n de ingredientes de recetas"},{"name":"Likes","description":"Sistema de likes\/favoritos"},{"name":"Comentarios","description":"Sistema de comentarios"}],"paths":{"\/api\/auth\/register":{"post":{"tags":["Autenticaci\u00f3n"],"summary":"Registrar nuevo usuario","description":"Crear una nueva cuenta de usuario","requestBody":{"required":true,"content":{"application\/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Juan P\u00e9rez"},"email":{"type":"string","format":"email","example":"juan@example.com"},"password":{"type":"string","format":"password","example":"password123"},"password_confirmation":{"type":"string","format":"password","example":"password123"}},"required":["name","email","password","password_confirmation"]}}}},"responses":{"201":{"description":"Usuario registrado exitosamente","content":{"application\/json":{"schema":{"type":"object","properties":{"token":{"type":"string"},"user":{"\\$ref":"#\/components\/schemas\/User"}}}}}},"422":{"description":"Validaci\u00f3n fallida"}}}},"\/api\/auth\/login":{"post":{"tags":["Autenticaci\u00f3n"],"summary":"Login de usuario","description":"Obtener token de autenticaci\u00f3n","requestBody":{"required":true,"content":{"application\/json":{"schema":{"type":"object","properties":{"email":{"type":"string","format":"email","example":"admin@demo.local"},"password":{"type":"string","format":"password","example":"password"}},"required":["email","password"]}}}},"responses":{"200":{"description":"Login exitoso","content":{"application\/json":{"schema":{"type":"object","properties":{"token":{"type":"string","example":"eyJ0eXAiOiJKV1Qi..."},"user":{"\\$ref":"#\/components\/schemas\/User"}}}}}},"401":{"description":"Credenciales inv\u00e1lidas"}}}},"\/api\/auth\/logout":{"post":{"tags":["Autenticaci\u00f3n"],"summary":"Logout de usuario","security":[{"sanctum":[]}],"responses":{"200":{"description":"Logout exitoso"},"401":{"description":"No autenticado"}}}},"\/api\/auth\/me":{"get":{"tags":["Autenticaci\u00f3n"],"summary":"Obtener datos del usuario autenticado","security":[{"sanctum":[]}],"responses":{"200":{"description":"Datos del usuario","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/User"}}}},"401":{"description":"No autenticado"}}}},"\/api\/recetas":{"get":{"tags":["Recetas"],"summary":"Listar recetas","description":"Obtener lista paginada de recetas con filtros opcionales","security":[{"sanctum":[]}],"parameters":[{"name":"q","in":"query","description":"B\u00fasqueda de texto en t\u00edtulo o descripci\u00f3n","schema":{"type":"string","example":"tortilla"}},{"name":"ingrediente","in":"query","description":"Filtrar por nombre de ingrediente","schema":{"type":"string","example":"huevo"}},{"name":"min_likes","in":"query","description":"M\u00ednimo n\u00famero de likes","schema":{"type":"integer","example":5}},{"name":"sort","in":"query","description":"Campo de ordenamiento (prefijo - para descendente)","schema":{"type":"string","enum":["titulo","-titulo","created_at","-created_at","likes_count","-likes_count"]}},{"name":"per_page","in":"query","description":"Items por p\u00e1gina","schema":{"type":"integer","default":10}},{"name":"page","in":"query","description":"N\u00famero de p\u00e1gina","schema":{"type":"integer","default":1}}],"responses":{"200":{"description":"Lista de recetas","content":{"application\/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"\\$ref":"#\/components\/schemas\/Receta"}},"meta":{"type":"object"}}}}}}}},"post":{"tags":["Recetas"],"summary":"Crear nueva receta","security":[{"sanctum":[]}],"requestBody":{"required":true,"content":{"application\/json":{"schema":{"type":"object","properties":{"titulo":{"type":"string","maxLength":200},"descripcion":{"type":"string"},"instrucciones":{"type":"string"}},"required":["titulo","descripcion","instrucciones"]}}}},"responses":{"201":{"description":"Receta creada","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Receta"}}}},"422":{"description":"Validaci\u00f3n fallida"}}}},"\/api\/recetas\/{receta}":{"get":{"tags":["Recetas"],"summary":"Obtener receta con detalles","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Detalle de receta","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Receta"}}}},"404":{"description":"Receta no encontrada"}}},"put":{"tags":["Recetas"],"summary":"Actualizar receta","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application\/json":{"schema":{"type":"object","properties":{"titulo":{"type":"string"},"descripcion":{"type":"string"},"instrucciones":{"type":"string"}}}}}},"responses":{"200":{"description":"Receta actualizada","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Receta"}}}},"403":{"description":"No autorizado"},"404":{"description":"Receta no encontrada"}}},"delete":{"tags":["Recetas"],"summary":"Eliminar receta","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Receta eliminada"},"403":{"description":"No autorizado"},"404":{"description":"Receta no encontrada"}}}},"\/api\/recetas\/{receta}\/ingredientes":{"get":{"tags":["Ingredientes"],"summary":"Listar ingredientes de una receta","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Lista de ingredientes","content":{"application\/json":{"schema":{"type":"array","items":{"\\$ref":"#\/components\/schemas\/Ingrediente"}}}}}}},"post":{"tags":["Ingredientes"],"summary":"Agregar ingrediente a receta","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application\/json":{"schema":{"type":"object","properties":{"nombre":{"type":"string","maxLength":200,"example":"Huevos"},"cantidad":{"type":"string","maxLength":50,"example":"4"},"unidad":{"type":"string","maxLength":50,"example":"ud","enum":["g","ml","ud","cucharadas","tazas","kg","l"]}},"required":["nombre","cantidad","unidad"]}}}},"responses":{"201":{"description":"Ingrediente agregado","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Ingrediente"}}}},"403":{"description":"No autorizado para modificar esta receta"}}}},"\/api\/recetas\/{receta}\/ingredientes\/{ingrediente}":{"get":{"tags":["Ingredientes"],"summary":"Obtener ingrediente espec\u00edfico","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}},{"name":"ingrediente","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Detalle del ingrediente","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Ingrediente"}}}},"404":{"description":"Ingrediente no encontrado"}}},"put":{"tags":["Ingredientes"],"summary":"Actualizar ingrediente","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}},{"name":"ingrediente","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application\/json":{"schema":{"type":"object","properties":{"nombre":{"type":"string"},"cantidad":{"type":"string"},"unidad":{"type":"string"}}}}}},"responses":{"200":{"description":"Ingrediente actualizado","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Ingrediente"}}}},"403":{"description":"No autorizado"}}},"delete":{"tags":["Ingredientes"],"summary":"Eliminar ingrediente","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}},{"name":"ingrediente","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Ingrediente eliminado"},"403":{"description":"No autorizado"}}}},"\/api\/recetas\/{receta}\/like":{"post":{"tags":["Likes"],"summary":"Toggle like de una receta","description":"Agregar o quitar un like a una receta. Si el usuario ya le dio like, se elimina. Si no, se agrega.","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Toggle realizado","content":{"application\/json":{"schema":{"type":"object","properties":{"message":{"type":"string"},"liked":{"type":"boolean"},"likes_count":{"type":"integer"}}}}}}}}},"\/api\/recetas\/{receta}\/likes":{"get":{"tags":["Likes"],"summary":"Obtener cantidad de likes de una receta","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Cantidad de likes","content":{"application\/json":{"schema":{"type":"object","properties":{"receta_id":{"type":"integer"},"likes_count":{"type":"integer"}}}}}}}}},"\/api\/recetas\/{receta}\/comentarios":{"get":{"tags":["Comentarios"],"summary":"Listar comentarios de una receta","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Lista de comentarios","content":{"application\/json":{"schema":{"type":"array","items":{"\\$ref":"#\/components\/schemas\/Comentario"}}}}}}},"post":{"tags":["Comentarios"],"summary":"Agregar comentario a receta","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"required":true,"content":{"application\/json":{"schema":{"type":"object","properties":{"texto":{"type":"string","maxLength":1000,"example":"\u00a1Excelente receta!"}},"required":["texto"]}}}},"responses":{"201":{"description":"Comentario agregado","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Comentario"}}}},"422":{"description":"Validaci\u00f3n fallida"}}}},"\/api\/recetas\/{receta}\/comentarios\/{comentario}":{"get":{"tags":["Comentarios"],"summary":"Obtener comentario espec\u00edfico","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}},{"name":"comentario","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Detalle del comentario","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Comentario"}}}},"404":{"description":"Comentario no encontrado"}}},"put":{"tags":["Comentarios"],"summary":"Actualizar comentario","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}},{"name":"comentario","in":"path","required":true,"schema":{"type":"integer"}}],"requestBody":{"content":{"application\/json":{"schema":{"type":"object","properties":{"texto":{"type":"string","maxLength":1000}},"required":["texto"]}}}},"responses":{"200":{"description":"Comentario actualizado","content":{"application\/json":{"schema":{"\\$ref":"#\/components\/schemas\/Comentario"}}}},"403":{"description":"No autorizado"},"404":{"description":"Comentario no encontrado"}}},"delete":{"tags":["Comentarios"],"summary":"Eliminar comentario","security":[{"sanctum":[]}],"parameters":[{"name":"receta","in":"path","required":true,"schema":{"type":"integer"}},{"name":"comentario","in":"path","required":true,"schema":{"type":"integer"}}],"responses":{"200":{"description":"Comentario eliminado"},"403":{"description":"No autorizado"},"404":{"description":"Comentario no encontrado"}}}}},"components":{"securitySchemes":{"sanctum":{"type":"apiKey","description":"Token de autenticaci\u00f3n con Sanctum","name":"Authorization","in":"header","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"User":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"email":{"type":"string","format":"email"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"Receta":{"type":"object","properties":{"id":{"type":"integer"},"titulo":{"type":"string"},"descripcion":{"type":"string"},"instrucciones":{"type":"string"},"publicada":{"type":"boolean"},"imagen":{"type":"string","nullable":true},"user_id":{"type":"integer"},"likes_count":{"type":"integer"},"ingredientes":{"type":"array","items":{"\\$ref":"#\/components\/schemas\/Ingrediente"}},"comentarios":{"type":"array","items":{"\\$ref":"#\/components\/schemas\/Comentario"}},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"Ingrediente":{"type":"object","properties":{"id":{"type":"integer"},"nombre":{"type":"string"},"cantidad":{"type":"string"},"unidad":{"type":"string"},"receta_id":{"type":"integer"},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"Comentario":{"type":"object","properties":{"id":{"type":"integer"},"texto":{"type":"string"},"receta_id":{"type":"integer"},"user_id":{"type":"integer"},"user":{"type":"object","properties":{"id":{"type":"integer"},"name":{"type":"string"},"email":{"type":"string"}}},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"Error":{"type":"object","properties":{"message":{"type":"string"},"status":{"type":"integer"}}},"ValidationError":{"type":"object","properties":{"message":{"type":"string"},"errors":{"type":"object","additionalProperties":{"type":"array","items":{"type":"string"}}}}}}}}